### Nginx ###
FROM nginx:alpine
RUN apk update
RUN apk add openssl python3 py3-pip
# RUN apt-get update && apt-get install -y openssl python3 python3-pip
WORKDIR /app
COPY proxy.py proxy.py
COPY requirements.txt requirements.txt
COPY start.sh start.sh
RUN chmod +x start.sh
RUN pip3 install -r requirements.txt
#CMD ["python3", "./proxy.py"]

RUN rm -rf /usr/share/nginx/html/*
COPY /Powerops  /usr/share/nginx/html/
COPY nginx.conf /etc/nginx/conf.d/default.conf
CMD ["./start.sh"]

EXPOSE 80 8080
#EXPOSE 80